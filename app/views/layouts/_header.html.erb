<header class="sticky-top">
  <nav class="navbar navbar-expand-lg navbar-white bg-white">
    <div class="container">
      <a class="navbar-brand text-energy" href="/">
        <h3 class="mt-auto mb-auto pt-auto pb-auto">LinkHub<%= image_tag 'LinkHub.jpg', size: '40x40' %></h3>
      </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
        <h3>
          <i class="fas fa-bars"></i>
        </h3>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavDropdown">
        <ul class="navbar-nav ml-auto">
          <% if user_signed_in? %>
            <li class="mr-2">
              <%= link_to new_theme_path(user_name: current_user.name), remote: true, class: "btn btn-energy" do %>
                <i class="fas fa-plus"></i> 新規投稿
              <% end %>
            </li>
            <li class="mr-2"><%= render "public/searches/form_search" %></li>
            <li class="dropdown mt-auto mb-auto">
              <a href="#" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                <%= attachment_image_tag current_user, :profile_image, format: "jpeg", fallback: "no_image.jpg", size:"40x40", style: "border-radius: 50%;" %>
              </a>
              <ul class="dropdown-menu">
                <li><%= link_to "マイページ", user_path(user_name: current_user.name), class: "nav-link" %></li>
                <li><%= link_to "設定", edit_user_registration_path, class: "nav-link" %></li>
                <li><%= link_to "ログアウト", destroy_user_session_path, method: :delete, class: "nav-link" %></li>
              </ul>
            </li>
            <% if current_user.is_admin == true && admin_signed_in? == false %>
              <li class="ml-2">
                <%= link_to new_admin_session_path, class: "btn btn-danger" do %>
                  <i class="fas fa-sign-in-alt"></i> ログイン
                <% end %>
              </li>
            <% end %>
            
          <% else %>
            <li class="mr-2"><%= render "public/searches/form_search" %></li>
            <li class="mr-2">
              <%= link_to new_user_registration_path, class: "btn btn-energy" do %>
                <i class="fas fa-user-plus"></i> 新規登録
              <% end %>
            </li>
            <li class="mr-2">
              <%= link_to new_user_session_path, class: "btn btn-energy" do %>
                <i class="fas fa-sign-in-alt"></i> ログイン
              <% end %>
            </li>
          <% end %>

          <% if admin_signed_in? %>
          <li>
            <%= link_to destroy_admin_session_path, method: :delete, class: "btn btn-danger" do %>
              <i class="fas fa-sign-in-alt"></i> ログアウト
            <% end %>
          </li>
          <% end %>
        </ul>
      </div>
    </div>
  </nav>
</header>